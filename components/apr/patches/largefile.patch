--- configure.in.orig	Sat Nov  3 07:13:08 2007
+++ configure.in	Fri Feb  8 04:54:31 2008
@@ -107,7 +107,7 @@
 
 dnl Enable the layout handling code, then reparse the prefix-style
 dnl arguments due to autoconf being a PITA.
-APR_ENABLE_LAYOUT(apr)
+APR_ENABLE_LAYOUT(Solaris-Apache2)
 APR_PARSE_ARGUMENTS
 
 dnl Set optional CC hints here in case autoconf makes an inappropriate choice.
@@ -1469,6 +1469,11 @@
                 socklen_t_value="int"
             fi
             ;;
+        *-solaris2*)
+           # sendfile64 doesn't work correctly with Apache (CR 6452545)
+           # (when LARGEFILE_SOURCE && _FILE_OFFSET_BITS == 64 are used)
+           sendfile="0"
+           ;;
     esac
 else
     socklen_t_value="int"
